# ===================================================================
# Application Configuration
# Redis Clone - Ash's Project
# 
# Author: ajsinha@gmail.com
# Copyright (c) 2025 Ash Sinha. All rights reserved.
# ===================================================================

# Application Configuration
spring.application.name=ashredisclone
server.port=8080

# Error handling
server.error.whitelabel.enabled=false
server.error.include-message=always
server.error.include-stacktrace=on_param
server.error.include-exception=true
server.error.path=/error

# ===================================================================
# CACHE REPOSITORY CONFIGURATION
# ===================================================================
# Repository Type Selection
# Options: "sql" (default) or "rocksdb"
# Change this property to switch between SQL and RocksDB implementations
# No code changes required!
cache.repository.type=rocksdb

# Enable dual mode for migration scenarios
# When true, both SQL and RocksDB implementations are available
# Useful for data migration between repositories
cache.repository.enable-dual-mode=false

# RocksDB Configuration (only used when cache.repository.type=rocksdb)
# Base directory where RocksDB files will be stored
# Each region will have its own subdirectory
cache.rocksdb.base.path=./data/rocksdb
# For production, use absolute paths or environment variables:
# cache.rocksdb.base.path=/var/lib/myapp/rocksdb
# cache.rocksdb.base.path=${ROCKSDB_PATH:/var/lib/myapp/rocksdb}

# ===================================================================
# CACHE SERVICE CONFIGURATION
# ===================================================================
# Maximum number of objects to keep in memory
# Objects exceeding this limit will be evicted to persistent storage
cache.max.memory.objects=10000

# Cache eviction policy
cache.eviction.policy=LRU

# Default region name when none is specified
cache.default.region=region0

# Interval for expired entries cleanup (in seconds)
cache.cleanup.interval.seconds=60

# ===================================================================
# DATABASE CONFIGURATION (for SQL repository)
# ===================================================================
# SQLite Configuration (Default)
spring.datasource.url=jdbc:sqlite:./data/sqlite/ashredis.db
spring.datasource.driver-class-name=org.sqlite.JDBC

# OR PostgreSQL Configuration (uncomment to use)
# spring.datasource.url=jdbc:postgresql://localhost:5432/cachedb
# spring.datasource.username=postgres
# spring.datasource.password=yourpassword
# spring.datasource.driver-class-name=org.postgresql.Driver

# OR MySQL Configuration (uncomment to use)
# spring.datasource.url=jdbc:mysql://localhost:3306/cachedb
# spring.datasource.username=root
# spring.datasource.password=yourpassword
# spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

cache.database.enabled=true

# JPA Configuration (optional)
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.SQLiteDialect
# For PostgreSQL: org.hibernate.dialect.PostgreSQLDialect
# For MySQL: org.hibernate.dialect.MySQLDialect

# ===================================================================
# NETWORK SERVER CONFIGURATION
# ===================================================================
network.server.enabled=true
network.server.port=6379
network.server.bind.address=0.0.0.0
network.server.io.threads=4
network.server.worker.threads=8

# ===================================================================
# KAFKA CONFIGURATION
# ===================================================================
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.consumer.group-id=ashredis-consumer
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=true
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer
kafka.replication.topic=ashredis-replication
kafka.replication.enabled=false
kafka.health.topic=ashredis-health

# ===================================================================
# ACTIVEMQ CONFIGURATION
# ===================================================================
activemq.broker.url=tcp://localhost:61616
activemq.enabled=false
activemq.connection.name=default

# ===================================================================
# KAFKA ASYNC PUB CONFIGURATION
# ===================================================================
kafka.async.enabled=false
kafka.async.connection.name=async

# ===================================================================
# CLUSTERING CONFIGURATION
# ===================================================================
cluster.enabled=false
cluster.instance.id=${random.uuid}
cluster.mode=primary
cluster.health.check.interval.ms=5000
cluster.failover.timeout.ms=15000
cluster.auto.promote.on.no.primary=true
cluster.startup.wait.for.primary.ms=10000

# ===================================================================
# WEB UI CONFIGURATION
# ===================================================================
web.ui.enabled=true
web.ui.session.timeout=1800

# ===================================================================
# LOGGING CONFIGURATION
# ===================================================================
logging.level.root=INFO
logging.level.com.ash.projects.redisclone=INFO
logging.level.com.ash.projects.redisclone.repository=DEBUG
logging.level.com.ash.projects.redisclone.config=INFO
logging.level.org.apache.mina=WARN
logging.level.org.springframework.kafka=WARN
logging.level.org.springframework.jdbc=WARN
logging.level.org.rocksdb=WARN

# ===================================================================
# QUICK START EXAMPLES
# ===================================================================

# Example 1: Use SQL Repository (Default)
# cache.repository.type=sql

# Example 2: Use RocksDB Repository
# cache.repository.type=rocksdb
# cache.rocksdb.base.path=./data/rocksdb

# Example 3: Use RocksDB with custom path
# cache.repository.type=rocksdb
# cache.rocksdb.base.path=/var/lib/myapp/rocksdb

# Example 4: Enable dual mode for migration
# cache.repository.type=rocksdb
# cache.repository.enable-dual-mode=true

# Example 5: Use environment variables
# cache.repository.type=${CACHE_REPO_TYPE:sql}
# cache.rocksdb.base.path=${ROCKSDB_PATH:/var/lib/myapp/rocksdb}

# ===================================================================
# TO SWITCH REPOSITORY IMPLEMENTATIONS:
# ===================================================================
# 1. Change cache.repository.type to "sql" or "rocksdb"
# 2. Restart the application
# 3. That's it! No code changes required.
# ===================================================================
